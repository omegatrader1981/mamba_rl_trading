# DEFINITIVE FINAL VERSION: Unified, region-aware, smoke-test ready

smoke_test:
  instance_type: "ml.g4dn.xlarge"
  instance_count: 1
  volume_size_gb: 30
  use_spot: true
  max_run_seconds: 3600        # 1 hour — true smoke test
  max_wait_seconds: 3600       # ✅ FIX: Add max_wait for spot instances
  region: eu-west-2            # ✅ Matches your SageMaker role and ECR
  base_job_name_prefix: "mamba-{{instrument}}-smoke-hpo"
  hydra_experiment: "sac_broad_smoke"  # Minimal HPO config

phase5b_refine_hpo:
  instance_type: "ml.g4dn.2xlarge"
  instance_count: 1
  volume_size_gb: 80
  use_spot: true
  max_run_seconds: 86400
  max_wait_seconds: 86400      # ✅ Best practice to include this
  region: eu-west-2
  base_job_name_prefix: "mamba-{{instrument}}-p5b-refine"
  hydra_experiment: "refine"

phase6a_sac_broad:
  instance_type: "ml.g4dn.2xlarge"
  instance_count: 1
  volume_size_gb: 100
  use_spot: true
  max_run_seconds: 172800
  max_wait_seconds: 259200
  region: eu-west-2            # ✅ Critical: all resources in eu-west-2
  checkpoint_s3_uri: "s3://sagemaker-eu-west-2-537124950121/checkpoints/mnq/Phase6a_SAC_Broad_V2"
  base_job_name_prefix: "mamba-{{instrument}}-p6a-sac-broad"
  hydra_experiment: "sac_broad"

final_training:
  instance_type: "ml.g4dn.2xlarge"
  instance_count: 1
  volume_size_gb: 80
  use_spot: true
  max_run_seconds: 86400
  max_wait_seconds: 86400      # ✅ Best practice to include this
  region: eu-west-2
  base_job_name_prefix: "mamba-{{instrument}}-final-train"
  hydra_experiment: "final_train"
