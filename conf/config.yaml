# Base configuration file
defaults:
  - experiment: smoke_test
  - optimization: default
  - _self_  # Load this file LAST so interpolations succeed

# Add a fallback structure for 'experiment'
experiment:
  name: "DefaultExperiment"
  description: "Base experiment fallback"

# Instrument selection
instrument: mnq

# Data configuration
data:
  train_start: "2020-01-01"
  train_end: "2021-12-31"
  val_start: "2022-01-01"
  val_end: "2022-12-31"
  test_start: "2023-01-01"
  test_end: "2024-12-31"
  regime_definitions:
    train_High_Vol_Crash:
      - ["2020-02-15", "2020-04-30"]
    train_Bull_Market:
      - ["2020-06-01", "2020-09-30"]
    train_Bear_Market:
      - ["2022-04-01", "2022-07-31"]
    train_Sideways_Chop:
      - ["2023-07-01", "2023-10-31"]
    train_Low_Vol_Grind:
      - ["2021-10-01", "2021-12-31"]
    val_2022_Q1:
      - ["2022-01-01", "2022-03-31"]
    val_2022_Q4:
      - ["2022-10-01", "2022-12-31"]
    test_2023_full:
      - ["2023-01-01", "2023-12-31"]
    test_2024_Q1:
      - ["2024-01-01", "2024-03-31"]
    test_2024_full:
      - ["2024-01-01", "2024-12-31"]

# Environment configuration
env:
  lookback_window: 20
  features:
    - "returns"
    - "log_returns"
    - "volatility"
    - "hurst_exponent"
    - "session_vwap_distance"
    - "risk_adjusted_momentum"
    - "hour_sin"
    - "hour_cos"
    - "day_of_week_sin"
    - "day_of_week_cos"
    - "hmm_regime"

# Model configuration
model:
  policy_type: "MlpPolicy"
  policy_kwargs:
    net_arch:
      pi: [256, 256]
      vf: [256, 256]
    activation_fn: "tanh"

# Training configuration
training:
  total_timesteps: 1000000
  n_eval_episodes: 10
  eval_freq: 50000
  save_freq: 100000
  verbose: 1

# Optimization configuration (will be overridden by optimization configs)
optimization:
  enabled: true
  n_trials: 50
  timeout: 7200
  n_jobs: 1

# Saving configuration
saving:
  output_dir: output_mamba_mnq_${experiment.name}
  scaler_filename: mnq_scaler_${experiment.name}.joblib
  optuna_study_name: mnq_Opt_${experiment.name}
  optuna_db_name: optuna_study_mnq_${experiment.name}.db
  best_params_filename: mnq_best_params_${experiment.name}.joblib
  final_model_filename: mnq_final_model_${experiment.name}.zip
  vec_normalize_filename: mnq_vecnormalize_final_${experiment.name}.pkl
  trades_filename: test_trades_${experiment.name}.csv
  equity_filename: test_equity_${experiment.name}.csv
  report_filename: mnq_report_${experiment.name}.html
  log_filename: mamba_rl_trading_${experiment.name}.log
  checkpoint_dir_name: checkpoints_${experiment.name}
